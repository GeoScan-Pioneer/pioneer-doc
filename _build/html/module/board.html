

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="ru" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="ru" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Плата подключения дополнительных модулей &mdash; Документация Pioneer </title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="index" title="Алфавитный указатель" href="../genindex.html" />
    <link rel="search" title="Поиск" href="../search.html" />
    <link rel="next" title="Модуль захвата груза" href="cargo.html" />
    <link rel="prev" title="Дополнительные модули" href="module_main.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Содержание:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../const/const_main.html">Сборка «Пионера»</a></li>
<li class="toctree-l1"><a class="reference internal" href="../settings/settings_main.html">Настройки</a></li>
<li class="toctree-l1"><a class="reference internal" href="../flight/flight.html">Полет</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="module_main.html">Дополнительные модули</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Плата подключения дополнительных модулей</a></li>
<li class="toctree-l2"><a class="reference internal" href="cargo.html">Модуль захвата груза</a></li>
<li class="toctree-l2"><a class="reference internal" href="gps.html">Модуль навигации GPS Глонасс</a></li>
<li class="toctree-l2"><a class="reference internal" href="openMV.html">Программируемая камера OpenMV</a></li>
<li class="toctree-l2"><a class="reference internal" href="optic.html">Модуль оптического позиционирования</a></li>
<li class="toctree-l2"><a class="reference internal" href="led.html">Модуль LED</a></li>
<li class="toctree-l2"><a class="reference internal" href="gopro.html">Подвес для камеры GoPro</a></li>
<li class="toctree-l2"><a class="reference internal" href="camera.html">Камера для фото и видео съемки</a></li>
<li class="toctree-l2"><a class="reference internal" href="fpv.html">FPV комплект</a></li>
<li class="toctree-l2"><a class="reference internal" href="indoor_nav.html">Бортовой модуль навигации в помещении</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../programming/programming.html">Программирование</a></li>
<li class="toctree-l1"><a class="reference internal" href="../indoor_nav.html">Система навигации в помещении Геоскан Локус</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQ.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Pioneer</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="module_main.html">Дополнительные модули</a> &raquo;</li>
        
      <li>Плата подключения дополнительных модулей</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/module/board.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>Плата подключения дополнительных модулей<a class="headerlink" href="#id1" title="Ссылка на этот заголовок">¶</a></h1>
<p>Используйте эту плату, чтобы подключать больше модулей к «Пионеру».</p>
<img alt="../_images/modules_board.png" class="align-center" src="../_images/modules_board.png" />
<p>При установке ориентируйте плату так, чтобы стрелка на ней указывала в ту же сторону, что и стрелка на основной плате квадрокоптера.
Плата крепится на нижнюю часть квадрокоптера вместо крышки отсека аккумулятора через стойки винтами М3.</p>
<p>Сверху на плате расположены два разъема. Используйте их, чтобы подключать шлейфы, идущие от базовой платы. На нижней поверхности - два разъема для подключения модулей. Модули подключаются «насквозь» через плату.</p>
<p>Также плата подключения дополнительных модулей оснащена лазерным дальномером. Он позволяет точно определять высоту над уровнем пола в пределах  0 - 1,5 м. Дальномер активируется в режиме удержания высоты. При этом «Пионер» будет сохранять одинаковое расстояние от поверхности, даже если она неровная. Пролетая над препятствием или впадиной, квадрокоптер будет менять высоту. Если закрыть датчик рукой или другим предметом, «Пионер» будет набирать высоту до тех пор, пока расстояние до препятствия не вернется к прежнему значению, или пока квадрокоптер не упрется в потолок.</p>
<p>Данные с дальномера можно считывать и использовать для управления квадрокоптером. В качестве примера приведена программа, меняющая цвет светодиодов на «Пионере» в зависимости от расстояния до земли. Используйте Pioneer Station, чтобы  <a class="reference external" href="../programming/pioneer_station/pioneer_station_upload.html">загрузить программу</a> на «Пионер».</p>
<div class="admonition note">
<p class="first admonition-title">Примечание</p>
<p class="last">Дальномер неактивен в режиме полета по GPS. Если программа не работает, откройте вкладку «<a class="reference external" href="../settings/autopilot_parameters.html">параметры автопилота</a> » в Pioneer Station и выберите набор параметров «LPS» или «OPT». Также можно вручную поменять значение параметра BoardPioneer_modules_gnss на 0,0.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">learnxinyminutes</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span><span class="n">ru</span><span class="o">-</span><span class="n">ru</span><span class="o">/</span><span class="n">lua</span><span class="o">-</span><span class="n">ru</span><span class="o">/</span> <span class="n">ссылка</span> <span class="n">для</span> <span class="n">быстрого</span> <span class="n">ознакомления</span> <span class="n">с</span> <span class="n">основами</span> <span class="n">языка</span> <span class="n">LUA</span>
<span class="o">--</span> <span class="n">упрощаем</span> <span class="n">вызов</span> <span class="n">функции</span> <span class="n">получения</span> <span class="n">расстояния</span> <span class="n">с</span> <span class="n">лазерного</span> <span class="n">дальномера</span>
<span class="n">local</span> <span class="nb">range</span> <span class="o">=</span> <span class="n">Sensors</span><span class="o">.</span><span class="n">range</span>
<span class="o">--</span> <span class="n">количество</span> <span class="n">светодиодов</span> <span class="n">на</span> <span class="n">основной</span> <span class="n">плате</span> <span class="n">пионера</span>
<span class="n">local</span> <span class="n">ledNumber</span> <span class="o">=</span> <span class="mi">4</span>
<span class="o">--</span> <span class="n">создание</span> <span class="n">порта</span> <span class="n">управления</span> <span class="n">светодиодами</span>
<span class="n">local</span> <span class="n">leds</span> <span class="o">=</span> <span class="n">Ledbar</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">ledNumber</span><span class="p">)</span>

<span class="o">--</span> <span class="n">функция</span> <span class="n">смены</span> <span class="n">цвета</span> <span class="n">светодиодов</span>
<span class="n">local</span> <span class="n">function</span> <span class="n">changeColor</span><span class="p">(</span><span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span><span class="p">)</span>
        <span class="o">--</span> <span class="n">меняет</span> <span class="n">поочередно</span> <span class="n">цвета</span> <span class="n">каждого</span> <span class="n">из</span> <span class="mi">4</span><span class="o">-</span><span class="n">х</span> <span class="n">светодиодов</span>
    <span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ledNumber</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span> <span class="n">do</span>
        <span class="n">leds</span><span class="p">:</span><span class="nb">set</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span><span class="p">)</span>
    <span class="n">end</span>
<span class="n">end</span>

<span class="n">function</span> <span class="n">callback</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
<span class="n">end</span>

<span class="o">--</span> <span class="n">создаем</span> <span class="n">таймер</span><span class="p">,</span> <span class="n">который</span> <span class="n">будет</span> <span class="n">каждую</span> <span class="n">десятую</span> <span class="n">секунды</span> <span class="n">считывать</span> <span class="n">расстояние</span> <span class="n">до</span> <span class="n">пола</span>
<span class="n">timerRangeRead</span> <span class="o">=</span> <span class="n">Timer</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">function</span> <span class="p">()</span>
    <span class="o">--</span> <span class="n">считываем</span> <span class="n">показания</span> <span class="n">в</span> <span class="n">метрах</span> <span class="n">с</span> <span class="n">лазерного</span> <span class="n">дальномера</span> <span class="p">(</span><span class="n">он</span> <span class="n">идет</span> <span class="mi">1</span><span class="o">-</span><span class="n">м</span> <span class="n">в</span> <span class="n">списке</span><span class="p">)</span> <span class="n">подключенного</span> <span class="n">датчика</span> <span class="n">расстояния</span>
    <span class="n">distance</span> <span class="o">=</span> <span class="nb">range</span><span class="p">()</span>
    <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
    <span class="o">--</span> <span class="n">при</span> <span class="n">превышении</span> <span class="n">допустимого</span> <span class="n">расстояния</span> <span class="n">лазерного</span> <span class="n">дальномера</span> <span class="n">датчик</span> <span class="n">выдает</span> <span class="n">константу</span> <span class="mf">8.19</span> <span class="n">м</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">distance</span> <span class="o">&gt;=</span> <span class="mf">8.19</span><span class="p">)</span> <span class="n">then</span>
        <span class="o">--</span> <span class="n">в</span> <span class="n">таком</span> <span class="n">случае</span> <span class="n">светодиоды</span> <span class="n">загораются</span> <span class="n">красным</span>
        <span class="n">r</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">else</span>
        <span class="o">--</span> <span class="n">меняем</span> <span class="n">яркость</span> <span class="n">светодиодов</span> <span class="n">в</span> <span class="n">зависимости</span> <span class="n">от</span> <span class="n">расстояния</span> <span class="p">(</span><span class="o">~</span><span class="mf">1.5</span> <span class="o">-</span> <span class="n">максимальное</span> <span class="n">расстояние</span> <span class="n">для</span> <span class="n">лазерного</span> <span class="n">дальномера</span> <span class="n">на</span> <span class="n">плате</span> <span class="n">адаптере</span><span class="p">)</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">distance</span> <span class="o">/</span> <span class="mf">1.5</span><span class="p">)</span>
    <span class="n">end</span>
    <span class="o">--</span> <span class="n">меняем</span> <span class="n">цвет</span> <span class="n">светодиодов</span> <span class="n">на</span> <span class="n">посчитанные</span> <span class="n">значения</span>
    <span class="n">changeColor</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="n">end</span><span class="p">)</span>
<span class="o">--</span> <span class="n">запускаем</span> <span class="n">таймер</span>
<span class="n">timerRangeRead</span><span class="p">:</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cargo.html" class="btn btn-neutral float-right" title="Модуль захвата груза" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="module_main.html" class="btn btn-neutral" title="Дополнительные модули" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Geoscan LTD

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>