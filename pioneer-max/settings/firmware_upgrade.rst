Установка актуальной прошивки и параметров АП
==============================================
Для корректной работы всех систем Pioneer Max рекомендуется устанавливать последнюю актуальную версию прошивки и параметров автопилота. Процедура обновления и настройки происходит с помощью программы  Pioneer Station. Для этого Вам необходимо скачать установщик на компьютер, после чего запустить exe файл.

Скачать |dnld_ps|

.. note::
	Если программа не запускается, попробуйте скачать 32-битную версию - |dnld_ps32|. Далее следует распаковать архив и запустить run.bat.

Следущим шагом нужно скачать прошивку для платы автопилота. 

Скачать актуальную версию прошивки - `1.6.7185`_ для работы с ROS или стандартную версию  |fw_ap_max|. Тестовые и ранние версии прошивок Вы можете найти в разделе :doc:`/downloads/software`.

.. _1.6.7185: https://drive.google.com/uc?export=download&confirm=no_antivirus&id=13Qm2YY8UcYd9dDmOfHSlHRpk7JiuzOxo

Также вместе с прошивкой потребуется установить стабильные `параметры автопилота для ROS <https://drive.google.com/uc?export=download&confirm=no_antivirus&id=1h7_B2DjN7hiN_PCSxYsdqPgXFBfr_AHK>`_ или стандартные `Параметры АП для Pioneer Max <https://disk.yandex.ru/d/IrWVG9xBmZaenw>`__

.. hint:: Для доступа к USB-порту базовой платы Pioneer Max, вам необходимо будет снять камеру Raspberry Pi Camera.

Инструкция по установке прошивки и стабильных параметров автопилота:

1. Подключите базовую плату Pioneer Max к компьютеру;
2. Запустите Pioneer Station;
3. В правом нижнем углу нажмите «Подключение» --> «По кабелю USB»;
4. В верхнем левом углу нажимите на значок квадрокоптера, затем «Обновление прошивки»;
5. Нажмите «Далее», в окне «Выбор устройства» выберите базовую плату и нажимаем «Далее»;
6. Выберите «Из файла»;
7. В открывшемся проводнике найдите файл «pioneer_max-boot_gs_****.bin», после чего нажмите «Прошить»;
8. Ожидайте окончания прошивки;
9. После перезагрузки платы перейдите в раздел «Параметры автопилота»;
10. Выберите «OPT» и ожидайте перезагрузки базовой платы;
11. Отключите аккумулятор питания из разъёма, затем отключите кабель USB из базовой платы;
12. В правом нижнем углу нажмите «Подключение» --> «По кабелю USB»;
13. Подключите базовую плату к компьютеру по USB кабелю;
14. В правом нижнем углу нажмите «Подключение» --> «По кабелю USB»;
15. Во вкладке «Параметры автопилота» нажмите кнопку «Обновить из автопилота»;
16. Нажмите «из файла» и в проводнике выберите файл «parameters_pioneer_max.properties»;
17. В появившимся окне нажмите «Ок»;
18. Нажмите кнопку «Сохранить изменения на автопилот»;
19. Дождитесь перезагрузки платы и выберите нужную систему позиционирования;
20. Убедитесь, что параметр BoardPioneer_auxUmux равен 1;
21. Если параметр не равен 1, повторите прошивку параметров и выбор системы позиционирования;

.. note:: 
	Если при выборе устройства квадрокоптер не отображается в окне, попробуйте переподключить его и перезапустить программу. Если это не помогло, попробуйте `скачать и установить драйвер порта`_, после чего переподключите "Пионер" и перезапустите программу.

.. _скачать и установить драйвер порта: https://www.silabs.com/products/development-tools/software/usb-to-uart-bridge-vcp-drivers

Если Вы столкнулись с проблемой обновления прошивки или работы "Пионера", напишите в техподдержку Геоскан 
support@geoscan.aero
